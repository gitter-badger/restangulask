
<div ng-controller="FastSearchController as search">

<!-- TOOLBAR -->
<form ng-submit="$event.preventDefault()" layout="row">
 <div flex="15"></div>
 <div flex="70" layout="column">
 <h4> Resultats de la <i>Recherche</i> </h4>
 <md-toolbar class="white black-text">
      <md-autocomplete md-autofocus
          md-min-length="0"

          md-selected-item="search.selectedItem"
          md-search-text-change="search.searchTextChange(search.searchText)"
          md-search-text="search.searchText"
          md-selected-item-change="search.selectedItemChange(item)"
          md-items="item in search.querySearch(search.searchText)"
          md-item-text="item.name"

          md-menu-class="autocomplete-custom-template"
          placeholder="Recherche" >
        <md-item-template>
          <span
            md-highlight-text="search.searchText"
            md-highlight-flags="^i"
            >{{item.name}}</span>
          <div layout="row" layout-align="start center">
              <i class="material-icons"> import_contacts </i>
              &nbsp;
              type:
              &nbsp;
              <strong>book</strong>
          </div>
        </md-item-template>
<!--
        <md-not-found> No matches found. </md-not-found>
-->
      </md-autocomplete>
 </md-toolbar>
 <span ng-if="search.elements >= 0">
    <b><i>Trouvés: {{search.elements}} éléments</i></b>
 </span>
 </div>
 <div flex="15"></div>
</form>
<!-- TOOLBAR -->


<md-content layout="row" layout-padding>
 <div flex='10'>&nbsp;</div>
 <div flex='80'>

<div ng-if="!search.data"
    ng-include="root.templateDir + 'loader.html'"></div>
 <table class='bordered highlight' ng-if="search.data">
  <thead>
    <tr>
        <th>Vignette</th>
        <th>Extrait</th>
        <th>Détails</th>
        <th><i>links</i></th>
    </tr>
  </thead>

  <tbody>
    <tr ng-repeat='row in search.data'>
      <!-- IMAGE -->
      <td style="height: 160px;">

<!--
          <a class="waves-effect waves-light btn disabled">
            <i class="material-icons blue-grey-text"> center_focus_weak </i>
          </a>
-->
        <div ng-if='!row._source.thumbnail'
            style=" background-repeat: no-repeat; background-size: 100% 100%;
                width: 110px; height: 160px;"
            ng-style="{'background-image':'url(http://placehold.it/110x160)'}"
        ></div>
        <div ng-if='row._source.thumbnail'
            style=" background-repeat: no-repeat; background-size: 100% 100%;
                width: 110px; height: 160px;"
            ng-style="{'background-image':'url('+ row._source.thumbnail +')'}"
        ></div>
      </td>
      <td>
            <strong>
              <span
                md-highlight-text="search.searchText"
                md-highlight-flags="^i">{{row._source.extrait}}</span>
            </strong> </td>
      <td>
        <i>Source</i>:
        <span md-highlight-text="search.searchText"
            md-highlight-flags="^i">{{row._source.source}}</span>
        <br>
        <i>Fete</i>:
        <span md-highlight-text="search.searchText"
            md-highlight-flags="^i">{{row._source.fete}}</span>
        <br>
        <i>Lieu</i>:
        {{row._source.place}}
        <br>
        <i>Date</i>:
        {{row._source.date}}
        <br>
      </td>
      <td>
          <a ui-sref='public.details({id: row._id})'
              class="waves-effect waves-light btn-floating lime lighten-3">
              <i class="material-icons blue-grey-text">web</i>
          </a>
      </td>
<!--
      <td>
          <a class="waves-effect waves-light btn-floating disabled">
              <i class="material-icons">mode_edit</i>
          </a>
      </td>
      <td>
          <a class="waves-effect waves-light btn-floating disabled">
              <i class="material-icons">delete</i>
          </a>
      </td>
-->
    </tr>
  </tbody>
 </table>
 </div>
 <div flex='10'>&nbsp;</div>
 </md-content>

</div>
